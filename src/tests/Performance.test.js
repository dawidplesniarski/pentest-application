import { fetchPerformanceResults } from '../api/performance'
import { BACKEND_URL } from '../utils/config'

jest.setTimeout(30000)

describe('Performance endpoint', () => {
  test('should return undefined when no param provided', async () => {
    expect.assertions(1)
    return expect(fetchPerformanceResults()).resolves.toBeUndefined()
  })

  test('should return undefined when incorrect param provided', async () => {
    expect.assertions(1)
    return expect(fetchPerformanceResults(`abcde`)).resolves.toBeUndefined()
  })

  test('should render correct report for test website', async () => {
    expect.assertions(1)

    return expect(
      fetchPerformanceResults(`${BACKEND_URL}/mocks/exampleTestPage`),
    ).resolves.toBeTruthy()
  })
})
